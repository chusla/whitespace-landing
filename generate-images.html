<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Generate 1024x1024 Images</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: system-ui, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 40px;
            min-height: 100vh;
        }
        h1 { margin-bottom: 30px; font-weight: 300; }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            max-width: 1400px;
        }
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }
        .card h2 {
            margin-bottom: 15px;
            font-weight: 400;
            font-size: 18px;
        }
        canvas {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        button {
            background: #4a6cf7;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        button:hover { background: #3b5ce5; }
        .info {
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <h1>App Store Image Generator (1024 × 1024)</h1>
    <div style="margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
        <label for="textMode" style="font-size: 14px; opacity: 0.8;">Text Mode:</label>
        <select id="textMode" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 8px; font-size: 14px; cursor: pointer;">
            <option value="plans">Plan Names</option>
            <option value="credits">Credit Amounts</option>
        </select>
    </div>
    <div class="grid">
        <div class="card">
            <h2 id="flow-title">FLOW - Standard Dark</h2>
            <canvas id="flow-canvas" width="1024" height="1024"></canvas>
            <button onclick="download('flow-canvas', getFilename('flow'))">Download PNG</button>
            <div class="info">1024 × 1024 px</div>
        </div>
        <div class="card">
            <h2 id="elevate-title">ELEVATE - Sky Blue</h2>
            <canvas id="elevate-canvas" width="1024" height="1024"></canvas>
            <button onclick="download('elevate-canvas', getFilename('elevate'))">Download PNG</button>
            <div class="info">1024 × 1024 px</div>
        </div>
        <div class="card">
            <h2 id="immerse-title">IMMERSE - Ocean Blue</h2>
            <canvas id="immerse-canvas" width="1024" height="1024"></canvas>
            <button onclick="download('immerse-canvas', getFilename('immerse'))">Download PNG</button>
            <div class="info">1024 × 1024 px</div>
        </div>
    </div>

    <script>
        const SIZE = 1024;

        // Get text based on current mode
        function getText(planName) {
            const mode = document.getElementById('textMode').value;
            if (mode === 'credits') {
                const creditMap = {
                    'FLOW': '1 Credit',
                    'ELEVATE': '2 Credits',
                    'IMMERSE': '4 Credits'
                };
                return creditMap[planName] || planName;
            }
            return planName;
        }

        // Get filename based on current mode
        function getFilename(planName) {
            const mode = document.getElementById('textMode').value;
            if (mode === 'credits') {
                const creditMap = {
                    'flow': '1-credit-1024.png',
                    'elevate': '2-credits-1024.png',
                    'immerse': '4-credits-1024.png'
                };
                return creditMap[planName] || `${planName}-1024.png`;
            }
            return `${planName}-1024.png`;
        }

        // Update card titles
        function updateTitles() {
            const mode = document.getElementById('textMode').value;
            if (mode === 'credits') {
                document.getElementById('flow-title').textContent = '1 Credit - Standard Dark';
                document.getElementById('elevate-title').textContent = '2 Credits - Sky Blue';
                document.getElementById('immerse-title').textContent = '4 Credits - Ocean Blue';
            } else {
                document.getElementById('flow-title').textContent = 'FLOW - Standard Dark';
                document.getElementById('elevate-title').textContent = 'ELEVATE - Sky Blue';
                document.getElementById('immerse-title').textContent = 'IMMERSE - Ocean Blue';
            }
        }

        // Explicitly load Inter font for canvas
        async function loadFonts() {
            const font = new FontFace('Inter', 'url(https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_nVMrMxCp50SjIw2boKoduKmMEVuGKYAZ9hiA.woff2)', {
                weight: '300',
                style: 'normal'
            });
            await font.load();
            document.fonts.add(font);
            
            generateFlow();
            generateElevate();
            generateImmerse();
            updateTitles();
        }
        
        loadFonts();

        // Regenerate when mode changes
        const textModeSelect = document.getElementById('textMode');
        if (textModeSelect) {
            textModeSelect.addEventListener('change', () => {
                updateTitles();
                generateFlow();
                generateElevate();
                generateImmerse();
            });
        }

        function createPhosphenes(config) {
            const phosphenes = [];
            for (let i = 0; i < config.count; i++) {
                const hueData = config.hueFunc();
                phosphenes.push({
                    x: Math.random() * SIZE,
                    y: Math.random() * SIZE,
                    radius: Math.random() * 200 + 100,
                    opacity: (Math.random() * 0.06 + 0.02) * config.intensity,
                    hue: hueData.hue,
                    saturation: hueData.saturation,
                    lightness: hueData.lightness
                });
            }
            return phosphenes;
        }

        function drawPhosphenes(ctx, phosphenes, bgColor) {
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, SIZE, SIZE);

            phosphenes.forEach(p => {
                const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.radius);
                gradient.addColorStop(0, `hsla(${p.hue}, ${p.saturation}%, ${p.lightness}%, ${p.opacity})`);
                gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function getTextSize(text) {
            // Calculate optimal font size and letter spacing for credit text
            // Canvas is 1024px wide, need to fit text with margins
            if (text === '1 Credit') {
                return { fontSize: 140, letterSpacing: 95 };
            } else if (text === '2 Credits' || text === '4 Credits') {
                return { fontSize: 130, letterSpacing: 85 };
            } else if (text.length <= 6) {
                // Short plan names like FLOW
                return { fontSize: 160, letterSpacing: 190 };
            } else if (text.length <= 8) {
                // Medium plan names like ELEVATE
                return { fontSize: 130, letterSpacing: 140 };
            } else {
                // Longer plan names like IMMERSE
                return { fontSize: 120, letterSpacing: 130 };
            }
        }

        function drawText(ctx, text, color, fontSize, letterSpacing) {
            ctx.fillStyle = color;
            ctx.font = `300 ${fontSize}px "Inter", sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Manual letter spacing
            const chars = text.split('');
            const totalWidth = chars.length * letterSpacing;
            let x = (SIZE - totalWidth) / 2 + letterSpacing / 2;
            
            chars.forEach(char => {
                ctx.fillText(char, x, SIZE / 2);
                x += letterSpacing;
            });
        }

        function generateFlow() {
            const canvas = document.getElementById('flow-canvas');
            const ctx = canvas.getContext('2d');
            
            // Base phosphenes - brighter
            const phosphenes = createPhosphenes({
                count: 60,
                intensity: 0.8,
                hueFunc: () => ({
                    hue: Math.random() > 0.4 ? 210 + Math.random() * 30 : 250 + Math.random() * 20,
                    saturation: Math.random() * 30 + 25,
                    lightness: Math.random() * 20 + 50
                })
            });
            
            // Add brighter corner phosphenes
            const corners = [
                { x: 150, y: 150 },
                { x: SIZE - 150, y: 150 },
                { x: 150, y: SIZE - 150 },
                { x: SIZE - 150, y: SIZE - 150 }
            ];
            
            corners.forEach(corner => {
                for (let i = 0; i < 10; i++) {
                    const hue = Math.random() > 0.5 ? 210 + Math.random() * 25 : 245 + Math.random() * 25;
                    phosphenes.push({
                        x: corner.x + (Math.random() - 0.5) * 350,
                        y: corner.y + (Math.random() - 0.5) * 350,
                        radius: Math.random() * 200 + 100,
                        opacity: Math.random() * 0.08 + 0.04,
                        hue: hue,
                        saturation: Math.random() * 35 + 35,
                        lightness: Math.random() * 15 + 60
                    });
                }
            });
            
            drawPhosphenes(ctx, phosphenes, 'rgb(10, 10, 15)');
            const text = getText('FLOW');
            const size = getTextSize(text);
            drawText(ctx, text, 'rgba(255, 255, 255, 0.95)', size.fontSize, size.letterSpacing);
        }

        function generateElevate() {
            const canvas = document.getElementById('elevate-canvas');
            const ctx = canvas.getContext('2d');
            
            const phosphenes = createPhosphenes({
                count: 100,
                intensity: 0.9,
                hueFunc: () => ({
                    hue: 185 + Math.random() * 35,
                    saturation: Math.random() * 40 + 50,
                    lightness: Math.random() * 20 + 70
                })
            });
            
            drawPhosphenes(ctx, phosphenes, 'rgb(220, 240, 255)');
            const text = getText('ELEVATE');
            const size = getTextSize(text);
            drawText(ctx, text, 'rgb(20, 50, 80)', size.fontSize, size.letterSpacing);
        }

        function generateImmerse() {
            const canvas = document.getElementById('immerse-canvas');
            const ctx = canvas.getContext('2d');
            
            const phosphenes = createPhosphenes({
                count: 120,
                intensity: 0.6,
                hueFunc: () => {
                    const rand = Math.random();
                    if (rand < 0.4) {
                        return { hue: 175 + Math.random() * 20, saturation: Math.random() * 30 + 50, lightness: Math.random() * 20 + 35 };
                    } else if (rand < 0.7) {
                        return { hue: 195 + Math.random() * 25, saturation: Math.random() * 35 + 45, lightness: Math.random() * 25 + 40 };
                    } else {
                        return { hue: 210 + Math.random() * 30, saturation: Math.random() * 30 + 40, lightness: Math.random() * 20 + 30 };
                    }
                }
            });
            
            drawPhosphenes(ctx, phosphenes, 'rgb(8, 25, 45)');
            const text = getText('IMMERSE');
            const size = getTextSize(text);
            drawText(ctx, text, 'rgba(255, 255, 255, 0.95)', size.fontSize, size.letterSpacing);
        }

        function download(canvasId, filename) {
            const canvas = document.getElementById(canvasId);
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
    </script>
</body>
</html>

